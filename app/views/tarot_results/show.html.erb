<div class="max-w-3xl mx-auto px-4 py-12 space-y-6" data-controller="scroll-restore">
  <!-- タイトル -->
  <div class="text-center">
    <h1 class="text-3xl md:text-4xl font-bold tracking-tight bg-gradient-to-r from-purple-600 via-fuchsia-600 to-indigo-600 bg-clip-text text-transparent">
      🔮 占い結果
    </h1>

    <% if flash[:notice].present? %>
      <div class="mb-4 rounded-xl border border-emerald-200 bg-emerald-50 px-4 py-3 text-emerald-800">
        <%= flash[:notice] %>
      </div>
    <% end %>

    <% if flash[:alert].present? %>
      <div class="mb-4 rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-rose-800">
        <%= flash[:alert] %>
      </div>
    <% end %>

    <div class="text-xs text-gray-500 mb-3">
      debug: result_id=<%= @tarot_result.id %> /
      cards=<%= @tarot_result.tarot_result_cards.count %> /
      max=<%= @tarot_result.max_cards %>
    </div>

    <div class="mt-3 text-sm text-gray-500">
      <% if @tarot_result.fortune_type == "today" %>
        今日の運勢
      <% elsif @tarot_result.fortune_type == "emotion" %>
        感情から占う（<%= @tarot_result.emotion %>）
      <% elsif @tarot_result.fortune_type == "genre" %>
        ジャンル別占い（<%= @tarot_result.genre %>）
      <% end %>
      ・<%= l(@tarot_result.created_at, format: :short) %>
    </div>
  </div>

  <%= render "cards", tarot_result: @tarot_result %>
  <%= render "message", tarot_result: @tarot_result %>
  <%= render "draw_button", tarot_result: @tarot_result %>

  <% if user_signed_in? %>
    <%= turbo_frame_tag dom_id(@tarot_result, :like_button) do %>
      <%= render 'tarot_results/like_button', tarot_result: @tarot_result %>
    <% end %>
  <% end %>
</div>
